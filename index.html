<!DOCTYPE html>
<html>
<head>
  <title>Buscador de MCC</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    /* ... (todo el CSS igual que antes, lo puedes copiar del ejemplo anterior) ... */
  </style>
</head>
<body>
  <h2>Buscador de MCC</h2>
  <input type="text" id="mccInput" placeholder="Busca por MCC, actividad, descripción..." oninput="filtrarMCC()" disabled>
  <div id="resultados" class="loading">Cargando datos...</div>

  <script>
    let datos = [];
    let datosCargados = false;
    // Catálogo real de medios de pago por país (ajusta según tu operación)
    const paises = ["CO","BR","AR","PE","CL","MX","PA"];
    const mediosPorPais = {
      "CO": ["OXXO", "IGT", "Davivienda", "Codensa", "Efecty", "Ding", "Bancolombia", "Nequi", "Botón", "Movii", "Scotiabank", "ACH", "Matrix", "TC", "Banco Occidente", "BBVA"],
      "MX": ["Banorte", "Amex", "Santader", "Bancomer", "Diestel", "SPEI", "Amex PR"],
      "PE": ["Pago efectivo", "Niubiz", "Izipay", "Amex PR", "Procesos MC", "Visanet"],
      "AR": ["Cobro Express", "Pagofacil", "Prisma", "Fiserv", "Rapipago"],
      "CL": ["Multicaja", "Transbank", "Santader__1"],
      "PA": ["Metrobank", "FISERV"],
      "BR": ["REDE", "CIELO"]
    };

    // ... (getBadge y getBadgeRestric igual que antes) ...

    function getBadge(val, label) {
      if (!val) return '';
      const v = val.toString().toLowerCase();
      if (v.includes('permitido')) return `<span class="badge badge-permitido">
        <svg viewBox="0 0 20 20" fill="currentColor"><circle cx="10" cy="10" r="10" fill="#1a7f37"/><path d="M6 10.5l2.5 2.5 5-5" stroke="#fff" stroke-width="2" fill="none" stroke-linecap="round"/></svg>
        ${label}
      </span>`;
      if (v.includes('restringido')) return `<span class="badge badge-restringido">
        <svg viewBox="0 0 20 20" fill="currentColor"><circle cx="10" cy="10" r="10" fill="#b59a00"/><rect x="5" y="9" width="10" height="2" rx="1" fill="#fff"/></svg>
        ${label}
      </span>`;
      if (v.includes('prohibido')) return `<span class="badge badge-prohibido">
        <svg viewBox="0 0 20 20" fill="currentColor"><circle cx="10" cy="10" r="10" fill="#d6003a"/><path d="M7 7l6 6M13 7l-6 6" stroke="#fff" stroke-width="2" stroke-linecap="round"/></svg>
        ${label}
      </span>`;
      return '';
    }

    function getBadgeRestric(val) {
      if (!val) return '';
      const v = val.toString().toLowerCase();
      if (v.includes('permitido')) return `<span class="badge badge-permitido">
        <svg viewBox="0 0 20 20" fill="currentColor"><circle cx="10" cy="10" r="10" fill="#1a7f37"/><path d="M6 10.5l2.5 2.5 5-5" stroke="#fff" stroke-width="2" fill="none" stroke-linecap="round"/></svg>
        Permitido
      </span>`;
      if (v.includes('restringido')) return `<span class="badge badge-restringido">
        <svg viewBox="0 0 20 20" fill="currentColor"><circle cx="10" cy="10" r="10" fill="#b59a00"/><rect x="5" y="9" width="10" height="2" rx="1" fill="#fff"/></svg>
        Restringido
      </span>`;
      if (v.includes('prohibido')) return `<span class="badge badge-prohibido">
        <svg viewBox="0 0 20 20" fill="currentColor"><circle cx="10" cy="10" r="10" fill="#d6003a"/><path d="M7 7l6 6M13 7l-6 6" stroke="#fff" stroke-width="2" stroke-linecap="round"/></svg>
        Prohibido
      </span>`;
      return '';
    }

    function generarTablaMediosPorPais(row) {
      let html = `<table class="restric-table"><tr>`;
      paises.forEach(pais => {
        html += `<th>${pais}</th>`;
      });
      html += `</tr><tr>`;
      paises.forEach(pais => {
        html += `<td>`;
        (mediosPorPais[pais]||[]).forEach(medio => {
          const val = row[medio];
          if (val && typeof val === "string" && val.trim() !== "") {
            html += getBadge(val, medio) + "<br>";
          }
        });
        html += `</td>`;
      });
      html += `</tr></table>`;
      return html;
    }

    // ... (el resto igual: fetch, filtrarMCC, etc) ...
  </script>
</body>
</html>
